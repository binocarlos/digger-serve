(function(){function require(path,parent,orig){var resolved=require.resolve(path);if(null==resolved){orig=orig||path;parent=parent||"root";var err=new Error('Failed to require "'+orig+'" from "'+parent+'"');err.path=orig;err.parent=parent;err.require=true;throw err}var module=require.modules[resolved];if(!module._resolving&&!module.exports){var mod={};mod.exports={};mod.client=mod.component=true;module._resolving=true;module.call(this,mod.exports,require.relative(resolved),mod);delete module._resolving;module.exports=mod.exports}return module.exports}require.modules={};require.aliases={};require.resolve=function(path){if(path.charAt(0)==="/")path=path.slice(1);var paths=[path,path+".js",path+".json",path+"/index.js",path+"/index.json"];for(var i=0;i<paths.length;i++){var path=paths[i];if(require.modules.hasOwnProperty(path))return path;if(require.aliases.hasOwnProperty(path))return require.aliases[path]}};require.normalize=function(curr,path){var segs=[];if("."!=path.charAt(0))return path;curr=curr.split("/");path=path.split("/");for(var i=0;i<path.length;++i){if(".."==path[i]){curr.pop()}else if("."!=path[i]&&""!=path[i]){segs.push(path[i])}}return curr.concat(segs).join("/")};require.register=function(path,definition){require.modules[path]=definition};require.alias=function(from,to){if(!require.modules.hasOwnProperty(from)){throw new Error('Failed to alias "'+from+'", it does not exist')}require.aliases[to]=from};require.relative=function(parent){var p=require.normalize(parent,"..");function lastIndexOf(arr,obj){var i=arr.length;while(i--){if(arr[i]===obj)return i}return-1}function localRequire(path){var resolved=localRequire.resolve(path);return require(resolved,parent,path)}localRequire.resolve=function(path){var c=path.charAt(0);if("/"==c)return path.slice(1);if("."==c)return require.normalize(p,path);var segs=parent.split("/");var i=lastIndexOf(segs,"deps")+1;if(!i)i=0;path=segs.slice(0,i+1).join("/")+"/deps/"+path;return path};localRequire.exists=function(path){return require.modules.hasOwnProperty(localRequire.resolve(path))};return localRequire};require.register("binocarlos-digger-bootstrap-for-angular/index.js",function(exports,require,module){angular.module("digger.bootstrap",[]).config(function($compileProvider){$digger.directive=function(){$compileProvider.directive.apply(null,arguments)}}).service("AsyncScriptLoader",function($q,$rootScope){var scripts={};var loadScriptAsync=function(src){if(!scripts[src]){var deferred=$q.defer();var script=document.createElement("script"),run=false;script.type="text/javascript";script.src=src;script.onload=script.onreadystatechange=function(){if(!run&&(!this.readyState||this.readyState==="complete")){run=true;deferred.resolve("Script ready: "+src);$rootScope.$digest()}};document.body.appendChild(script);scripts[src]=deferred.promise}return scripts[src]};return{load:loadScriptAsync}}).service("DiggerComponentLoader",function(AsyncScriptLoader,$q,$rootScope,$http){var baseurl=$digger.config.diggerurl+"/reception/component";var components={};var loadComponent=function(name){if(!components[name]){var javascript_src=baseurl+"/"+name;var parts=name.split("/");var repo=parts.pop();var modulename=name.replace(/\//g,"-");var css_src=javascript_src+"/build/build"+($digger.config.debug?"":".min")+".css";javascript_src+=$digger.config.debug?"?debug=y":"";var deferred=$q.defer();AsyncScriptLoader.load(javascript_src).then(function(){var link=document.createElement("link");link.setAttribute("rel","stylesheet");link.setAttribute("type","text/css");link.setAttribute("href",css_src);document.getElementsByTagName("head")[0].appendChild(link);var module=window.require(repo);var html="";if(typeof module==="string"){html=module}else{html=module.html}deferred.resolve(html)});components[name]=deferred.promise}return components[name]};return{load:loadComponent}}).run([function($rootScope,xmlDecoder){var templates={};var scripts=angular.element(document).find("script");for(var i=0;i<scripts.length;i++){var script=angular.element(scripts[i]);var html=script.html();if(script.attr("type")==="digger/field"){var name=script.attr("name");var html=script.html();if($digger.config.debug){console.log("-------------------------------------------");console.log("add template: "+name);console.log(html)}$digger.template.add(name,html)}else if(script.attr("type")==="digger/blueprint"){var blueprint_container=xmlDecoder(html);if(blueprint_container){$digger.blueprint.add(blueprint_container)}}}}]).factory("$digger",function(){return window.$digger}).controller("DiggerRootCtrl",function($scope,$rootScope,$digger){$scope.connect=$digger.connect;$scope.user=$digger.user;$scope.warehouse=$digger.connect($digger.config.root_warehouse||"/");$rootScope.warehouse=$scope.warehouse});if(!window.$digger){throw new Error("$digger must be loaded on the same page to use the digger angular module")}else{var app=window.$digger.config.application||"digger";document.documentElement.setAttribute("ng-controller","DiggerRootCtrl");angular.element(document).ready(function(){angular.bootstrap(document,[app])})}});require.register("binocarlos-digger-utils-for-angular/index.js",function(exports,require,module){angular.module("digger.utils",["digger.radio"]).factory("$safeApply",[function($rootScope){return function($scope,fn){var phase=$scope.$root.$$phase;if(phase=="$apply"||phase=="$digest"){if(fn){$scope.$eval(fn)}}else{if(fn){$scope.$apply(fn)}else{$scope.$apply()}}}}]).service("$containerTreeData",function($q,$rootScope,$safeApply){var containers={};function load($scope,selector){if(!containers[selector]){var deferred=$q.defer();$rootScope.warehouse(selector+":tree(folder)").ship(function(root){$safeApply($scope,function(){deferred.resolve(root)})});containers[selector]=deferred.promise}return containers[selector]}return{load:load}}).factory("$getAncestors",function(){return function(root,container){var match=root.find("="+container.diggerid());if(match.isEmpty()){return[]}var ancestors=[];var current=match;while(current){var parent=root.find("="+current.diggerparentid());if(parent.isEmpty()){current=null}else{ancestors.unshift(parent);current=parent}}return ancestors}})});require.register("binocarlos-digger-supplychain-for-angular/index.js",function(exports,require,module){require("digger-utils-for-angular");angular.module("digger.supplychain",["digger.utils"]).factory("$warehouseLoader",function($rootScope,$safeApply){return function($scope){return function(selector,warehousepath){if(!selector){return}var warehouse=$rootScope.warehouse;if(warehousepath){warehouse=$digger.connect(warehousepath)}warehouse(selector).ship(function(results){$safeApply($scope,function(){$scope.$digger=results;$scope.containers=results.containers()})}).fail(function(error){$scope.error=error})}}}).directive("digger",function($warehouseLoader,$safeApply){return{restrict:"EA",priority:1e3,scope:true,link:function($scope,elem,$attrs){var loader=$warehouseLoader($scope);$scope.$on("digger:reload",function(){loader($attrs.selector,$attrs.warehouse)});$attrs.$observe("selector",function(selector){loader(selector,$attrs.warehouse)})}}})});require.register("binocarlos-digger-radio-for-angular/index.js",function(exports,require,module){angular.module("digger.radio",[]).factory("$containerRadio",function($safeApply){return function($scope,container){var radio=null;function cleanup(){if(radio){radio.cancel("*");radio=null}}$scope.$on("$destroy",cleanup);radio=container.radio();radio.bind();radio.on("radio:event",function(packet){$safeApply($scope,function(){$scope.$emit("radio:event",packet)})})}}).directive("diggerRadio",function($containerRadio){return{restrict:"EA",link:function($scope,elem,$attrs){$scope.$watch($attrs.for,function(container){if(!container){return}$containerRadio($scope,container)})}}})});require.register("binocarlos-digger-filters-for-angular/index.js",function(exports,require,module){angular.module("digger.filters",[]).filter("ucfirst",function(){return function(text,length,end){text=text||"";return text.replace(/^\w/,function(st){return st.toUpperCase()})}}).filter("cutoff",function(){return function(text,length){text=text||"";if(text.length>length){text=text.substr(0,length)+"..."}return text}}).filter("idcolon",function(){return function(text,length,end){text=text||"";return text.replace(/^\w+:/,"")}}).filter("lastfieldpart",function(){return function(st){var parts=st.split(".");return parts.pop()}}).filter("money",function(){return function(st){if(!st){return""}return(""+st).replace(/^\./,"0.")}}).filter("icontitle",function(){return function(text,length,end){text=text||"";return text.replace(/^icon-/,"")}}).filter("datetime",function(){return function(timestamp){var dt=new Date(timestamp);return dt.toString()}}).filter("matchContainer",function(){return function(items,selector){if(!search){return items}var filtered=[];angular.forEach(items,function(item){return item.match(selector)});return filtered}}).filter("rejectContainer",function(){return function(items,selector){if(!search){return items}var filtered=[];angular.forEach(items,function(item){return!item.match(selector)});return filtered}}).filter("parentContainer",function(){return function(items,parentid,noresults){if(!items){return null}parentid=parentid||"";if(!parentid.match(/\w/)){return noresults?[]:items}var filtered=[];angular.forEach(items,function(item){if(item.digger("diggerparentid")==parentid){filtered.push(item)}});return filtered}}).filter("searchContainers",function(){return function(items,search,noresults){if(!items){return null}search=search||"";if(!search.match(/\w/)){return noresults?[]:items}var filtered=[];angular.forEach(items,function(item){var attr=item.get(0);var added=false;for(var prop in attr){var value=attr[prop];if(!added&&value&&typeof value==="string"){if(prop.indexOf("_")!=0&&value.toLowerCase().indexOf(search.toLowerCase())>=0){added=true;filtered.push(item)}}}});return filtered}}).filter("viewersort",function(){return function(items){var ret=[].concat(items);ret.sort(function(a,b){var textA=(a.attr("name")||a.tag()).toUpperCase();var textB=(b.attr("name")||b.tag()).toUpperCase();var folderA=a.tag()=="folder";var folderB=b.tag()=="folder";if(folderA&&!folderB){return-1}else if(folderB&&!folderA){return 1}return textA<textB?-1:textA>textB?1:0});return ret}})});require.register("binocarlos-digger-repeat-for-angular/index.js",function(exports,require,module){angular.module("digger.repeat",[]).directive("diggerRepeat",function($filter){return{transclude:"element",scope:true,priority:100,compile:function(element,attr,linker){return function($scope,$element,$attr){var self=this;var repeat_what=$attr.diggerRepeat||"containers()";var fn_string=repeat_what;var parent=$element.parent();var elems=[];function build_template(container){var $child_scope=$scope.$new();$child_scope.$digger=container;linker($child_scope,function(clone_of_template){elems.push(clone_of_template);parent.append(clone_of_template)})}function reset_template(){elems.forEach(function(elem){elem.remove()})}function run_compile(){var $digger=$scope.$digger;if(!$digger){return}reset_template();var st="$digger."+fn_string;try{var arr=eval(st);if(typeof arr.containers==="function"){arr=arr.containers()}arr.forEach(build_template)}catch(e){console.log("-------------------------------------------");console.dir(e);console.log(e.stack)}}$scope.$watch("$digger",run_compile)}}}})});require.register("binocarlos-digger-min-for-angular/index.js",function(exports,require,module){require("digger-bootstrap-for-angular");require("digger-utils-for-angular");require("digger-supplychain-for-angular");require("digger-radio-for-angular");require("digger-filters-for-angular");require("digger-repeat-for-angular");angular.module("digger",["digger.bootstrap","digger.utils","digger.supplychain","digger.radio","digger.filters","digger.repeat"])});require.register("diggerserve-angularmin/index.js",function(exports,require,module){require("digger-min-for-angular")});require.alias("binocarlos-digger-min-for-angular/index.js","diggerserve-angularmin/deps/digger-min-for-angular/index.js");require.alias("binocarlos-digger-min-for-angular/index.js","diggerserve-angularmin/deps/digger-min-for-angular/index.js");require.alias("binocarlos-digger-min-for-angular/index.js","digger-min-for-angular/index.js");require.alias("binocarlos-digger-bootstrap-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-bootstrap-for-angular/index.js");require.alias("binocarlos-digger-bootstrap-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-bootstrap-for-angular/index.js");require.alias("binocarlos-digger-bootstrap-for-angular/index.js","binocarlos-digger-bootstrap-for-angular/index.js");require.alias("binocarlos-digger-utils-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-utils-for-angular/index.js");require.alias("binocarlos-digger-utils-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-utils-for-angular/index.js");require.alias("binocarlos-digger-utils-for-angular/index.js","binocarlos-digger-utils-for-angular/index.js");require.alias("binocarlos-digger-supplychain-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-supplychain-for-angular/index.js");require.alias("binocarlos-digger-supplychain-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-supplychain-for-angular/index.js");require.alias("binocarlos-digger-utils-for-angular/index.js","binocarlos-digger-supplychain-for-angular/deps/digger-utils-for-angular/index.js");require.alias("binocarlos-digger-utils-for-angular/index.js","binocarlos-digger-supplychain-for-angular/deps/digger-utils-for-angular/index.js");require.alias("binocarlos-digger-utils-for-angular/index.js","binocarlos-digger-utils-for-angular/index.js");require.alias("binocarlos-digger-supplychain-for-angular/index.js","binocarlos-digger-supplychain-for-angular/index.js");require.alias("binocarlos-digger-radio-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-radio-for-angular/index.js");require.alias("binocarlos-digger-radio-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-radio-for-angular/index.js");require.alias("binocarlos-digger-radio-for-angular/index.js","binocarlos-digger-radio-for-angular/index.js");require.alias("binocarlos-digger-filters-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-filters-for-angular/index.js");require.alias("binocarlos-digger-filters-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-filters-for-angular/index.js");require.alias("binocarlos-digger-filters-for-angular/index.js","binocarlos-digger-filters-for-angular/index.js");require.alias("binocarlos-digger-repeat-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-repeat-for-angular/index.js");require.alias("binocarlos-digger-repeat-for-angular/index.js","binocarlos-digger-min-for-angular/deps/digger-repeat-for-angular/index.js");require.alias("binocarlos-digger-repeat-for-angular/index.js","binocarlos-digger-repeat-for-angular/index.js");require.alias("binocarlos-digger-min-for-angular/index.js","binocarlos-digger-min-for-angular/index.js");require.alias("diggerserve-angularmin/index.js","diggerserve-angularmin/index.js");require("diggerserve-angularmin")})();